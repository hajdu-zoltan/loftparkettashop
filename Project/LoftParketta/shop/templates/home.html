{% extends 'base.html' %}

{% block title %}Home - My Webshop{% endblock %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<link rel="stylesheet" href="{% static 'css/popular_products.css' %}">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">



<div class="container-fluid" style="
    padding-left: 0px;
    padding-right: 0px;
">
    {% block refrence %}
        {% include 'news.html' %}
        {% include 'categorys.html' %}
        <div class="container-fluid reveal fade-bottom px-4 py-5" style="width: 90%;">
    <h2 class="pb-2 border-bottom text-center">Top termékeink</h2>
    <div class="row justify-content-around">
        <!-- Swiper -->
        <div class="swiper swiper1">
            <div class="swiper-wrapper products-container">
                {% for product in top_product_items %}
                    <div class="swiper-slide col-lg-2 col-md-2 col-sm-6 mb-2 d-flex justify-content-center align-items-stretch">
                        {% include 'product_card.html' with product=product %}
                    </div>
                {% endfor %}
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
    </div>
    <div class="mt-auto text-center">
        <a href="{% url 'shop:products' %}" class="btn btn-primary fs-2 top_product_btn">MINDEN TERMÉK</a>
    </div>
</div>

        <!-- Swiper JS -->
        <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
        
        <!-- Initialize Swiper -->
         <script>
            var swiper = new Swiper(".mySwiper", {
              effect: "cards",
              grabCursor: true,
              navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            loop:true,
            autoplay: {
              delay: 6000,
              disableOnInteraction: false,
            },
            });
          </script>
        <script>
          var _slidesPerView = window.innerWidth <= 760 ? '1' : '2';
          if(_slidesPerView == '2'){
            var swiper = new Swiper('.swiper2', {
            slidesPerView: 1,
            direction: getDirection(),
            loop:true,
            autoplay: {
              delay: 6000,
              disableOnInteraction: false,
            },
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            on: {
              resize: function () {
                swiper.changeDirection(getDirection());
              },
            },
          });
          }
          else{
            var swiper = new Swiper('.swiper2', {
            slidesPerView: 1,
            direction: getDirection(),
            autoplay: {
              delay: 3000,
              disableOnInteraction: false,
            },
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            on: {
              resize: function () {
                swiper.changeDirection(getDirection());
              },
            },
          });
          }
        
        
        
          function getDirection() {
            var windowWidth = window.innerWidth;
            var direction = window.innerWidth <= 760 ? 'horizontal' : 'horizontal';
        
            return direction;
          }
        </script>
        <script>
          var _slidesPerView = window.innerWidth <= 760 ? '1' : '2';
          if(_slidesPerView == '2'){
            var swiper = new Swiper('.swiper1', {
            slidesPerView: 4,
            direction: getDirection(),
            loop:true,
            autoplay: {
              delay: 6000,
              disableOnInteraction: false,
            },
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            on: {
              resize: function () {
                swiper.changeDirection(getDirection());
              },
            },
          });
          }
          else{
            var swiper = new Swiper('.swiper1', {
            slidesPerView: 1,
            direction: getDirection(),
            autoplay: {
              delay: 3000,
              disableOnInteraction: false,
            },
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            on: {
              resize: function () {
                swiper.changeDirection(getDirection());
              },
            },
          });
          }
        
        
        
          function getDirection() {
            var windowWidth = window.innerWidth;
            var direction = window.innerWidth <= 760 ? 'horizontal' : 'horizontal';
        
            return direction;
          }
        </script>       
<!--<div class="container px-4 py-5" id="custom-cards">-->
<!--            <div class="row g-4">-->
<!--                <div class="col-md-4">-->
<!--                    <div class="infocard h-100">-->
<!--                        <div class="row g-0 h-100">-->
<!--                            <div class="col-md-4">-->
<!--                                <img src="{% static 'image/credit-card.png' %}" class="img-fluid" alt="...">-->
<!--                            </div>-->
<!--                            <div class="col-md-8">-->
<!--                                <div class="infocard-body">-->
<!--                                    <div class="infocard-content">-->
<!--                                        <h5 class="infocard-title">Biztonságos fizetés</h5>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="col-md-4">-->
<!--                    <div class="infocard h-100">-->
<!--                        <div class="row g-0 h-100">-->
<!--                            <div class="col-md-4">-->
<!--                                <img src="{% static 'image/fast-delivery.png' %}" class="img-fluid" alt="...">-->
<!--                            </div>-->
<!--                            <div class="col-md-8">-->
<!--                                <div class="infocard-body">-->
<!--                                    <div class="infocard-content">-->
<!--                                        <h5 class="infocard-title">Gyors kiszállítás</h5>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="col-md-4">-->
<!--                    <div class="infocard h-100">-->
<!--                        <div class="row g-0 h-100">-->
<!--                            <div class="col-md-4">-->
<!--                                <img src="{% static 'image/automation.png' %}" class="img-fluid" alt="...">-->
<!--                            </div>-->
<!--                            <div class="col-md-8">-->
<!--                                <div class="infocard-body">-->
<!--                                    <div class="infocard-content">-->
<!--                                        <h5 class="infocard-title">Szakértő ügyfélszolgálat</h5>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
        
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
        
        
        <hr/>
        <h1>Akciós termékeink</h1>
        <div class="container-fluid" style="width: 90%;">
            <div id="products-container" class="row">
                {% for product in page_obj %}
                <div class="col-lg-2 col-md-2 col-sm-6 mb-2 d-flex">
                    {% include 'product_card.html' with product=product %}
                </div>
                {% endfor %}
            </div>

            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center" id="pagination">
                    {% if page_obj.has_previous %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    {% endif %}

                    {% for num in page_obj.paginator.page_range %}
                    <li class="page-item {% if page_obj.number == num %}active{% endif %}">
                        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                    </li>
                    {% endfor %}

                    {% if page_obj.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    {% endblock refrence %}
</div>
{% endblock %}
